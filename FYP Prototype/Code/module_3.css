/* --- Global Body Style --- */
#module-3-content-wrapper body { 
    background-color: #111; 
    /* Applying the new, more classic font */
    font-family: 'Baskerville', serif; /* or 'Lora', 'Georgia', 'Libre Baskerville' */
    margin: 0;
    padding: 0;
}

/* --- Fixed Navigation Button Styles (Top Left & Top Right) --- */
#module-3-content-wrapper #back-to-module1, #next-to-chart2 {
    position: fixed; 
    top: 20px;
    padding: 10px 15px;
    color: #111;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    z-index: 10000; 
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    transition: background-color 0.3s, color 0.3s;
}

/* Back Button (Top Left) */
#module-3-content-wrapper #back-to-module1 {
    left: 20px;
    background-color: #4CAF50; /* Green/Fill color */
    color: #111; /* Ensure text is dark for contrast */
}
#module-3-content-wrapper #back-to-module1:hover {
    background-color: #6aab6d;
}

/* New Next Button (Top Right) */
#module-3-content-wrapper #next-to-chart2 {
    right: 20px;
    background-color: #007bff; /* Blue for contrast/Next action */
    color: white; /* White text on blue background */
}
#module-3-content-wrapper #next-to-chart2:hover {
    background-color: #0056b3;
}


/* --- Chart/Legend Component Styles --- */

/* Style for the legend circles */
#module-3-content-wrapper .legend-circle {
    display: inline-block;
    width: 15px;
    height: 15px;
    border-radius: 50%;
    margin-right: 5px;
    border: 1px solid #fff;
    vertical-align: middle;
}
/* New style for the relocated scale note */
#module-3-content-wrapper .scale-note {
    color: #ccc;
    font-size: 1.35em;
    margin-top: 5px;
    margin-bottom: 15px;
}


/* --- Scene 2/Hero Section Styles --- */

/* Basic styling for scene 2 (using your provided background image path) */
#module-3-content-wrapper .hunger-bg {
    height: 100vh;
    background: url("../asset/hunger.jpg") no-repeat center center/cover;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
}
#module-3-content-wrapper .overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgb(0 0 0 / 22%);
    z-index: 1;
}
#module-3-content-wrapper .text-container {
    position: relative;
    z-index: 2;
    color: white;
}
#module-3-content-wrapper .fade-text {
    font-size: 2.5rem;
    line-height: 1.3;
}
#module-3-content-wrapper .fade-text b {
    font-size: 3rem;
    display: block;
    margin-top: 10px;
}

/* --- Paragraph Styles (p_text) with Fade-in Effect --- */

#module-3-content-wrapper .p_text{
    color: white; 
    text-align: center; 
    margin-bottom: 40px;
    font-size: 28px; /* Your new size */
    max-width: 800px; /* Added max-width for better control */
    margin-left: auto;
    margin-right: auto;
}

/* Animation styles for p_text */
#module-3-content-wrapper .p_text {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 1s ease-out, transform 1s ease-out;
}

#module-3-content-wrapper .p_text.fade-in {
    opacity: 1;
    transform: translateY(0);
}

#module-3-content-wrapper .module3_p_text {
    color: white; 
    text-align: center; 
    margin-bottom: 40px;
    font-size: 28px;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
    /* INITIAL STATE: opacity 0 */
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 1s ease-out, transform 1s ease-out;
}

/* FIX 2: Correct the class name for the visible state */
#module-3-content-wrapper .module3_p_text.visible {
    opacity: 1;
    transform: translateY(0);
}

#module-3-content-wrapper .text-container-module3 {
    position: absolute;
    color: #fff;
    font-size: 1.8rem;
    z-index: 1;
}

#scene3 {
	width: 100%;
}

.module3_p_text{
    text-align: center;
    margin-bottom: 40px;
    font-size: 28px;
}

#module-3-content-wrapper #module4_map_content {
    /* ... existing styles ... */
    max-width: 1200px;
    margin: 0 auto;
    padding: 50px 20px;
}

/* New style for the map visualization container itself */
#module-3-content-wrapper #map-visualization {
    /* Use a responsive max-width to ensure it fits mobile screens */
    max-width: 900px; 
    margin: 0 auto; /* Center the map within its parent container */
    display: block;
}

/* Ensure the SVG generated by D3 is responsive to its container */
#module-3-content-wrapper #map-visualization svg {
    display: block;
    width: 100%;
    height: auto;
}

.tooltip {
    /* Critical positioning and appearance styles */
    position: absolute;
    text-align: center;
    padding: 8px;
    font: 12px sans-serif;
    background: #f9f9f9; /* Light background so text is visible */
    border: 1px solid #aaa;
    border-radius: 4px;
    pointer-events: none; /* Crucial: ensures the tooltip doesn't block mouse events on the map itself */
    color: #111; /* Dark text color */
    z-index: 10000; /* Must be high enough to display over the map/content */
    transition: opacity 0.2s; /* Transition for fading in/out */
}

/* Ensure the map path elements are ready to accept hovers */
#module-3-content-wrapper .country-path {
    cursor: pointer;
}

/* --- Legend Item Styling (For Map and Icon Grid) --- */

#module-3-content-wrapper .legend-item {
    display: flex; /* Ensures the box and text stay on one line */
    align-items: center;
    margin: 5px 10px; /* Provides separation for the items */
    font-size: 18px; /* Readable text size */
}

/* CRITICAL FIX: Defines the size and shape of the color box */
#module-3-content-wrapper .legend-color-box {
    width: 20px;       /* Define the width */
    height: 20px;      /* Define the height */
    margin-right: 8px; /* Space between the box and the label text */
    border: 1px solid #999; /* Optional: adds a slight border for visibility */
    box-sizing: border-box; /* Includes padding/border in size calculation */
    /* Add border-radius if you want them circular, but they are currently square. */
}

/* Ensure the text has its base color if it's relying on a default body style */
#module-3-content-wrapper b {
    color: white; 
}

/* In module_3.css */

/* FIX 1: Ensure the Flex wrapper allows the filter control to take up space beside the chart */
#module-3-content-wrapper #chart-and-filter-wrapper {
    /* The inline style already has: display: flex; justify-content: center; */
    /* Add alignment for height */
    align-items: flex-start; /* Aligns items to the top (important for vertical consistency) */
}

/* FIX 2: Make the filter items flexible themselves */
#module-3-content-wrapper #region-filter-controls {
    /* This container holds the list of checkboxes */
    flex-direction: column; /* Ensure main container is column-based */
    flex-wrap: wrap;       /* Allow wrapping if list gets too long vertically */
    
    /* CRITICAL: Set a fixed width so the chart knows how much horizontal space the filter takes */
    width: 150px; /* Adjust this value if your list of regions is longer */
    
    padding-top: 50px; /* Keep this for vertical alignment */
}

/* Ensure individual filter items display correctly */
#module-3-content-wrapper .filter-item {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    margin-bottom: 5px;
    width: 100%; /* Force item to fill 100% of the 150px column */
}